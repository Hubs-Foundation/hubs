<!DOCTYPE html>
<html>

<head>
    <!-- DO NOT REMOVE/EDIT THIS COMMENT - META_TAGS -->

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="shortcut icon" type="image/png" href="/favicon.ico">
    <title>Room | Hubs by Mozilla</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700" rel="stylesheet">
    <script>
        // HACK Chrome on iOS breaks completely if we don't do this because a-frame's webvr-polyfill doesn't recognize
        // Google Chrome on iOS correctly. We can remove this when we upgrade a-frame past 0.8.2.
        if (!window.WebVRConfig) { window.WebVRConfig = {}; }
    </script>
    <!-- Google Analytics -->
    <!-- NOTE GA tracking is disabled by default. You'll need to set the GA_TRACKING_ID build variable to enable it. -->
    <script>
    if (navigator.doNotTrack !== "1") {
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    }
    </script>
</head>

<body>
    <a-scene
        nextframe
        class="grab-cursor"
        renderer="antialias: true; colorManagement: true; sortObjects: true; physicallyCorrectLights: true; alpha: false;"
        shadow="type: pcfsoft"
        networked-scene="adapter: janus; audio: true; debug: true; connectOnLoad: false;"
        physics="gravity: -9.8; debug: false; driver: ammo; debugDrawMode: 1;"
        mute-mic="eventSrc: a-scene; toggleEvents: action_mute"
        freeze-controller="toggleEvent: action_freeze"
        personal-space-bubble="debug: false;"
        vr-mode-ui="enabled: false"
        stats-plus="false"
        rotate-selected-object
        action-to-event__mute="path: /actions/muteMic; event: action_mute;"
        environment-map="loadDefault: false"
    >
        <a-assets>
            <img id="rotation-symbol" crossorigin="anonymous" src="./assets/rotation.png">
            <img id="button" crossorigin="anonymous" src="./assets/hud/button.9.png">
            <img id="action-button" crossorigin="anonymous" src="./assets/hud/action_button.9.png">
            <img id="tooltip" crossorigin="anonymous" src="./assets/hud/tooltip.9.png">
            <img id="mute-off" crossorigin="anonymous" src="./assets/hud/mute_off.png">
            <img id="mute-off-hover" crossorigin="anonymous" src="./assets/hud/mute_off-hover.png">
            <img id="mute-on" crossorigin="anonymous" src="./assets/hud/mute_on.png">
            <img id="mute-on-hover" crossorigin="anonymous" src="./assets/hud/mute_on-hover.png">
            <img id="bubble-off" crossorigin="anonymous" src="./assets/hud/bubble_off.png">
            <img id="bubble-off-hover" crossorigin="anonymous" src="./assets/hud/bubble_off-hover.png">
            <img id="bubble-on" crossorigin="anonymous" src="./assets/hud/bubble_on.png">
            <img id="bubble-on-hover" crossorigin="anonymous" src="./assets/hud/bubble_on-hover.png">
            <img id="spawn" crossorigin="anonymous" src="./assets/hud/spawn.png">
            <img id="spawn-hover" crossorigin="anonymous" src="./assets/hud/spawn-hover.png">
            <img id="spawn-pen" crossorigin="anonymous" src="./assets/hud/spawn_pen.png">
            <img id="spawn-pen-hover" crossorigin="anonymous" src="./assets/hud/spawn_pen-hover.png">
            <img id="spawn-camera" crossorigin="anonymous" src="./assets/hud/spawn_camera.png">
            <img id="spawn-camera-hover" crossorigin="anonymous" src="./assets/hud/spawn_camera-hover.png">
            <img id="snap-camera" crossorigin="anonymous" src="./assets/images/snap_camera.png">
            <img id="camera" crossorigin="anonymous" src="./assets/images/camera.png">
            <img id="presence-count" crossorigin="anonymous" src="./assets/hud/presence-count.png">
            <img id="water-normal-map" crossorigin="anonymous" src="./assets/waternormals.jpg">

            <img id="video-seek-back" crossorigin="anonymous" src="./assets/video-overlay/seek_back.png">
            <img id="video-seek-back-hover" crossorigin="anonymous" src="./assets/video-overlay/seek_back-hover.png">
            <img id="video-seek-forward" crossorigin="anonymous" src="./assets/video-overlay/seek_fwd.png">
            <img id="video-seek-forward-hover" crossorigin="anonymous" src="./assets/video-overlay/seek_fwd-hover.png">
            <img id="video-play" crossorigin="anonymous" src="./assets/video-overlay/play.png">
            <img id="video-play-hover" crossorigin="anonymous" src="./assets/video-overlay/play-hover.png">
            <img id="video-pause" crossorigin="anonymous" src="./assets/video-overlay/pause.png">
            <img id="video-pause-hover" crossorigin="anonymous" src="./assets/video-overlay/pause-hover.png">

            <a-asset-item id="botdefault" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf"></a-asset-item>
            <a-asset-item id="botbobo" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf"></a-asset-item>
            <a-asset-item id="botdom" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf"></a-asset-item>
            <a-asset-item id="botgreg" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf"></a-asset-item>
            <a-asset-item id="botguest" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf"></a-asset-item>
            <a-asset-item id="botjim" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf"></a-asset-item>
            <a-asset-item id="botkev" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf"></a-asset-item>
            <a-asset-item id="botpinky" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf"></a-asset-item>
            <a-asset-item id="botrobert" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf"></a-asset-item>
            <a-asset-item id="botwoody" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf"></a-asset-item>

            <a-asset-item id="quack"                                      src="./assets/sfx/quack.mp3"          response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="specialquack"                               src="./assets/sfx/specialquack.mp3"   response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-quack"                          src="./assets/sfx/quack.mp3"          response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-teleport_start"                 src="./assets/sfx/teleportArc.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-teleport_end"                   src="./assets/sfx/quickTurn.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-snap_rotate"                    src="./assets/sfx/tap_mellow.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-media_loaded"                   src="./assets/sfx/A_bendUp.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-media_loading"                  src="./assets/sfx/suspense.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-hud_hover_start"                src="./assets/sfx/tick.mp3"  response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-grab"                           src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-grab_off"                       src="./assets/sfx/tick.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-pinned"                         src="./assets/sfx/tack.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-cursor_distance_change_blocked" src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-cursor_distance_changed"        src="./assets/sfx/tick.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-hud_click"                      src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-toggle_mute"                    src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-toggle_freeze"                  src="./assets/sfx/Eb_blip.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-freeze"                         src="./assets/sfx/Eb_blip.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-thaw"                           src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-toggle_space_bubble"            src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-spawn_pen"                      src="./assets/sfx/PenSpawn.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-increase_pen_radius"            src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-decrease_pen_radius"            src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-next_pen_color"                 src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-prev_pen_color"                 src="./assets/sfx/tick.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-start_draw"                     src="./assets/sfx/PenDraw1.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-stop_draw"                      src="./assets/sfx/tick.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-camera_tool_took_snapshot"      src="./assets/sfx/PicSnapHey.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-welcome"                        src="./assets/sfx/welcome.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-chat"                           src="./assets/sfx/pop.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>

            <template id="remote-avatar-template">
                <a-entity networked-avatar ik-root player-info matrix-auto-update>
                    <a-entity class="camera" matrix-auto-update></a-entity>

                    <a-entity class="left-controller" matrix-auto-update></a-entity>

                    <a-entity class="right-controller" matrix-auto-update></a-entity>

                    <a-entity class="model" gltf-model-plus="inflate: true">
                        <template data-name="AvatarRoot">
                            <a-entity ik-controller hand-pose__left hand-pose__right space-invader-mesh="meshName: AvatarMesh"></a-entity>
                        </template>

                        <template data-name="Neck">
                            <a-entity>
                                <a-entity
                                    class="nametag"
                                    billboard
                                    matrix-auto-update
                                    text="side: double; align: center; color: #ddd"
                                    position="0 1 0"
                                    scale="6 6 6"
                                ></a-entity>
                            </a-entity>
                        </template>

                        <template data-name="Spine">
                            <a-entity personal-space-invader="radius: 0.2; useMaterial: true;" bone-visibility>
                                <a-entity billboard matrix-auto-update visibility-while-frozen="withinDistance: 10; requireHoverOnNonMobile: false;">
                                    <a-entity hoverable mixin="rounded-text-button" block-button ui-class-while-frozen position="0 0 .35"> </a-entity>
                                    <a-entity text="value:Hide; width:2.5; align:center;" position="0 0 0.36"></a-entity>
                                    <a-entity hoverable mixin="rounded-text-button" visible-if-permitted="kick_users" kick-button ui-class-while-frozen position="0 -0.25 .35"> </a-entity>
                                    <a-entity text="value:Kick; width:2.5; align:center;"  visible-if-permitted="kick_users" position="0 -0.25 0.36"></a-entity>
                                </a-entity>
                            </a-entity>
                        </template>

                        <template data-name="Head">
                            <a-entity
                                networked-audio-source
                                networked-audio-analyser
                                personal-space-invader="radius: 0.15; useMaterial: true;"
                                bone-visibility
                                ammo-body="type: kinematic;"
                                ammo-shape="type: cylinder; autoGenerateShape: false; mergeGeometry: false; halfExtents: 0.11 0.10 0.11; offset: 0 0.06 0.04;"
                            ></a-entity>
                        </template>

                        <template data-name="LeftHand">
                            <a-entity personal-space-invader="radius: 0.1" bone-visibility></a-entity>
                        </template>

                        <template data-name="RightHand">
                            <a-entity personal-space-invader="radius: 0.1" bone-visibility></a-entity>
                        </template>
                    </a-entity>
                </a-entity>
            </template>

            <template id="static-media">
                <a-entity
                    ammo-body="type: static; mass: 1;"
                    set-sounds-invisible
                >
                </a-entity>
            </template>

            <template id="static-controlled-media">
                <a-entity
                    class="interactable"
                    super-networked-interactable="counter: #media-counter;"
                    ammo-body="type: static; mass: 1;"
                    grabbable="constraintComponentName: ammo-constraint"
                    hoverable
                    hoverable-visuals="cursorController: #cursor-controller"
                    sound__grab="src: #sound_asset-grab; on: grabbed; poolSize: 1; positional: false;"
                    sound__graboff ="src: #sound_asset-grab_off; on: ungrabbed; poolSize: 1; positional: false;"
                    set-sounds-invisible
                    emit-state-change__grabbed="state: grabbed; transform: rising; event: grabbed;"
                    emit-state-change__ungrabbed="state: grabbed; transform: falling; event: ungrabbed;"
                >
                </a-entity>
            </template>

            <template id="interactable-media">
                <a-entity
                    class="interactable"
                    super-networked-interactable="counter: #media-counter;"
                    ammo-body="type: dynamic; mass: 1;"
                    grabbable="constraintComponentName: ammo-constraint"
                    stretchable="useWorldPosition: true; usePhysics: never"
                    hoverable
                    hoverable-visuals="cursorController: #cursor-controller"
                    sticky-object="autoLockOnRelease: true; autoLockOnLoad: true;"
                    position-at-box-shape-border__freeze="target:.freeze-menu;"
                    destroy-at-extreme-distances
                    set-yxz-order
                    pinnable
                    matrix-auto-update
                    sound__grab="src: #sound_asset-grab; on: grabbed; poolSize: 1; positional: false;"
                    sound__graboff ="src: #sound_asset-grab_off; on: ungrabbed; poolSize: 1; positional: false;"
                    sound__pinned ="src: #sound_asset-pinned; on: pinned; poolSize: 1; positional: false;"
                    set-sounds-invisible
                    emit-state-change__grabbed="state: grabbed; transform: rising; event: grabbed;"
                    emit-state-change__ungrabbed="state: grabbed; transform: falling; event: ungrabbed;"
                    emit-state-change__pinned="state: pinned; transform: rising; event: pinned;"
                >
                    <a-entity class="ui interactable-ui" mixin="button-container">
                        <a-entity class="freeze-menu" visibility-while-frozen="withinDistance: 10;">
                            <a-entity mixin="rounded-text-action-button" pin-networked-object-button="labelSelector:.pin-button-label; hideWhenPinnedSelector:.hide-when-pinned;" position="0 0.125 0.01"> </a-entity>
                            <a-entity class="pin-button-label" text=" value:pin; width:1.75; align:center;" text-raycast-hack position="0 0.125 0.02"></a-entity>
                            <a-entity mixin="rounded-text-button" camera-focus-button="track: false" position="-0.25 0.375 0.01">
                                <a-entity text=" value:focus; width:1.75; align:center;" text-raycast-hack position="0.075 0 0.02"></a-entity>
                                <a-image
                                    icon-button="image: #camera; hoverImage: #camera;"
                                    scale="0.165 0.165 0.165"
                                    position="-0.105 0.005 0.01"
                                ></a-image>
                            </a-entity>
                            <a-entity mixin="rounded-text-button" camera-focus-button="track: true" position="0.25 0.375 0.01">
                                <a-entity text=" value:track; width:1.75; align:center;" text-raycast-hack position="0.075 0 0.02"></a-entity>
                                <a-image
                                    icon-button="image: #camera; hoverImage: #camera;"
                                    scale="0.165 0.165 0.165"
                                    position="-0.105 0.005 0.01"
                                ></a-image>
                            </a-entity>
                            <a-entity mixin="rounded-text-button" class="hide-when-pinned" remove-networked-object-button position="0 -0.125 0.01"> </a-entity>
                            <a-entity text=" value:remove; width:1.75; align:center;" class="hide-when-pinned" text-raycast-hack position="0 -0.125 0.02"></a-entity>
                            <a-entity mixin="rounded-text-button" open-media-button position="0.25 -0.375 0.01">
                                <a-entity text="value:open link; width:1.75; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                            </a-entity>
                            <a-entity mixin="rounded-text-button" clone-media-button position="-0.25 -0.375 0.01">
                                <a-entity text="value:clone; width:1.75; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                            </a-entity>
                            <a-entity scale="0.8 0.8 1" mixin="rounded-text-button" rotate-button rotate-button-selector position="-0.6  0.12 0.01">
                                <a-entity text="value:rotate; width:1.50; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                            </a-entity>
                            <a-entity  scale="0.8 0.8 1" mixin="rounded-text-button" rotate-button="mode: align;" position="-0.6 -0.12 0.01">
                                <a-entity text="value:re-center; width:1.40; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <template id="pen-interactable">
                <a-entity
                    class="pen interactable"
                    super-networked-interactable="counter: #pen-counter;"
                    ammo-body="type: dynamic; mass: 0.001;"
                    grabbable="maxGrabbers: 1; constraintComponentName: ammo-constraint;"
                    sticky-object="autoLockOnRelease: true; autoLockOnLoad: true; autoLockSpeedLimit: 0;"
                    hoverable
                    matrix-auto-update
                    scale="0.5 0.5 0.5"
                    sound__next_pen_color="src: #sound_asset-next_pen_color; on: next_pen_color; poolSize: 2; positional: false;"
                    sound__prev_pen_color="src: #sound_asset-prev_pen_color; on: prev_pen_color; poolSize: 2; positional: false;"
                    sound__start_draw="src: #sound_asset-start_draw; on: start_draw; poolSize: 2;"
                    sound__stop_draw="src: #sound_asset-stop_draw; on: stop_draw; poolSize: 2; positional: false;"
                    sound__increase_pen_radius="src: #sound_asset-increase_pen_radius; on: increase_pen_radius; poolSize: 2; positional: false;"
                    sound__decrease_pen_radius="src: #sound_asset-decrease_pen_radius; on: decrease_pen_radius; poolSize: 2; positional: false;"
                    sound__grab="src: #sound_asset-grab; on: grabbed; poolSize: 1; positional: false;"
                    sound__graboff ="src: #sound_asset-grab_off; on: ungrabbed; poolSize: 1; positional: false;"
                    set-sounds-invisible
                    emit-state-change__grabbed="state: grabbed; transform: rising; event: grabbed;"
                    emit-state-change__ungrabbed="state: grabbed; transform: falling; event: ungrabbed;"
                    position-at-box-shape-border="target:.pen-menu"
                >
                    <a-sphere
                        id="pen"
                        scale="1.5, 1.5, 1.5"
                        position="0 -0.18 0"
                        radius="0.02"
                        color="#FF0033"
                        pen="camera: #player-camera; drawingManager: #drawing-manager"
                        segments-width="16"
                        segments-height="12"
                    ></a-sphere>
                    <a-entity class="ui delete-button pen-menu" visibility-while-frozen="withinDistance: 10;" mixin="button-container" >
                        <a-entity mixin="rounded-text-button" remove-networked-object-button position="0 0 0.1"> </a-entity>
                        <a-entity text=" value:remove; width:2.5; align:center;" text-raycast-hack position="0 0 0.11"></a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <template id="interactable-camera">
                <a-entity
                    class="interactable icamera"
                    grabbable="constraintComponentName: ammo-constraint;"
                    hoverable
                    stretchable
                    camera-tool
                    matrix-auto-update
                    ammo-body="type: dynamic; mass: 0.001;"
                    ammo-shape="type: box; autoGenerateShape: false; mergeGeometry: false; halfExtents: 0.11 0.07 0.05; offset: 0 0.02 0;"
                    sticky-object="autoLockOnRelease: true; autoLockOnLoad: true; autoLockSpeedLimit: 0;"
                    super-networked-interactable="counter: #camera-counter;"
                    position-at-box-shape-border__freeze="target: .camera-menu"
                    set-yxz-order
                >
                    <a-entity class="ui interactable-ui camera-menu" visibility-while-frozen="withinDistance: 10;" mixin="button-container" >
                        <a-entity mixin="rounded-text-action-button" mirror-camera-button="labelSelector:.mirror-button-label;" position="0 0.125 0.01"> </a-entity>
                        <a-entity text=" value:mirror; width:2.5; align:center;" class="mirror-button-label" text-raycast-hack position="0 0.125 0.02"></a-entity>
                        <a-entity mixin="rounded-text-button" remove-networked-object-button position="0 -0.125 0.01"> </a-entity>
                        <a-entity text=" value:remove; width:2.5; align:center;" text-raycast-hack position="0 -0.125 0.02"></a-entity>
                        <a-entity scale="0.8 0.8 1" mixin="rounded-text-button" rotate-button rotate-button-selector position="-0.7 0.06 0.01">
                            <a-entity text="value:rotate; width:2.40; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                        </a-entity>
                        <a-entity  scale="0.8 0.8 1" mixin="rounded-text-button" rotate-button="mode: align;" position="-0.7 -0.15 0.01">
                            <a-entity text="value:re-center; width:2.2; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                        </a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <template id="camera-hover-menu">
                <a-entity class="ui interactable-ui hover-container camera-snap-menu" mixin="button-container">
                    <a-entity class="snap-button" mixin="rounded-text-action-button" position="0 -0.145 0.0" scale="0.75 0.75 0.75">
                        <a-entity text="value:; width:1; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                        <a-image
                            icon-button="image: #snap-camera; hoverImage: #snap-camera;"
                            scale="0.225 0.225 0.225"
                            position="0 0.005 0.01"
                        ></a-image>
                    </a-entity>
                </a-entity>
            </template>

            <template id="interactable-drawing">
                <a-entity
                    networked-drawing
                ></a-entity>
            </template>

            <template id="paging-toolbar">
                <a-entity class="ui paging-toolbar" visible-to-owner>
                    <a-entity class="prev-button" position="-0.3 0 0">
                        <a-entity mixin="rounded-text-button" slice9="width: 0.2"> </a-entity>
                        <a-entity text=" value:<; width:2; align:center;" text-raycast-hack position="0 0 0.01"></a-entity>
                    </a-entity>
                    <a-entity class="page-label" text="width:2; align:center;" text-raycast-hack></a-entity>
                    <a-entity class="next-button" position="0.3 0 0">
                        <a-entity mixin="rounded-text-button" slice9="width: 0.2"> </a-entity>
                        <a-entity text=" value:>; width:2; align:center;" text-raycast-hack position="0 0 0.01"></a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <!-- TODO: All of these positions are assuming 16:9 - need to actually reposition based on video resolution -->
            <template id="video-hover-menu">
                <a-entity class="ui interactable-ui hover-container" mixin="button-container" visible="false">
                    <a-entity class="video-time-label" text="value: 0; anchor: right; align: right;" text-raycast-hack position="0.485 -0.25 -0.015"></a-entity>
                    <a-entity class="video-volume-label" text="value: 0%; anchor: right; align: right;" text-raycast-hack position="0.485 0.25 -0.015" visible="false"></a-entity>
                    <a-image
                        icon-button="image: #video-seek-back; hoverImage: #video-seek-back-hover;"
                        scale="0.1 0.1 0.1"
                        position="-0.3 0 0"
                        class="ui video-seek-back-button"
                        visible="false"
                    ></a-image>
                    <a-image
                        icon-button="image: #video-pause; hoverImage: #video-pause-hover; activeImage: #video-play; activeHoverImage: #video-play-hover"
                        scale="0.2 0.2 0.2"
                        position="0 0 0"
                        class="ui video-playpause-button"
                        visible="false"
                    ></a-image>
                    <a-image
                        icon-button="image: #video-seek-forward; hoverImage: #video-seek-forward-hover;"
                        scale="0.1 0.1 0.1"
                        position="0.3 0 0"
                        class="ui video-seek-forward-button"
                        visible="false"
                    ></a-image>
                </a-entity>
            </template>

            <template id="hubs-destination-hover-menu">
                <a-entity class="ui interactable-ui hover-container" mixin="button-container" visible="false">
                    <a-entity mixin="rounded-text-action-button ui" open-media-button position="0 -0.125 0.01">
                        <a-entity text="value:value; width:1.5; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <template id="video-unmute">
                <a-entity
                    class="ui unmute-ui"
                    position="0 0 0.1"
                    visibility-while-frozen="visible: false; withinDistance: 10; requireHoverOnNonMobile: false;"
                    mixin="button-container"
                >
                    <a-entity class="unmute-button">
                        <a-entity mixin="rounded-text-button" slice9="width: 0.4" unmute-video-button> </a-entity>
                        <a-entity text=" value:un-mute; width:2; align:center;" text-raycast-hack position="0 0 0.01"></a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <a-mixin id="rounded-text-button"
                text-button="
                    haptic:#player-right-controller;
                    textHoverColor: #fff;
                    textColor: #fff;
                    backgroundHoverColor: #aaa;
                    backgroundColor: #fff;"
                slice9="
                    width: 0.45;
                    height: 0.2;
                    left: 64;
                    top: 64;
                    right: 66;
                    bottom: 66;
                    opacity: 1.0;
                    src: #button"
            ></a-mixin>

            <a-mixin id="rounded-text-action-button"
                text-button="
                    haptic:#player-right-controller;
                    textHoverColor: #fff;
                    textColor: #fff;
                    backgroundColor: #ff3550;
                    backgroundHoverColor: #fc3545;
                    "
                slice9="
                    width: 0.45;
                    height: 0.2;
                    left: 64;
                    top: 64;
                    right: 66;
                    bottom: 66;
                    opacity: 1.0;
                    src: #action-button"
            ></a-mixin>

            <a-mixin id="button-container"
                stop-event-propagation__grab-start="event: grab-start"
                stop-event-propagation__grab-end="event: grab-end"
                stop-event-propagation__stretch-start="event: stretch-start"
                stop-event-propagation__stretch-end="event: stretch-end"
            ></a-mixin>

            <a-mixin id="controller-super-hands"
                super-hands="
                    colliderEvent: collide;
                    colliderEventProperty: targetEl;
                    colliderEndEvent: collide-end;
                    colliderEndEventProperty: targetEl;
                    grabStartButtons: primary_hand_grab, secondary_hand_grab;
                    grabEndButtons: primary_hand_release, secondary_hand_release;
                    stretchStartButtons: primary_hand_grab, secondary_hand_grab;
                    stretchEndButtons: primary_hand_release, secondary_hand_release;
                    dragDropStartButtons: hand_grab, secondary_hand_grab;
                    dragDropEndButtons: hand_release, secondary_hand_release;
                    activateStartButtons: secondary_hand_grab, next_color, previous_color, increase_radius, decrease_radius, scroll_up, scroll_down, scroll_left, scroll_right;
                    activateEndButtons: secondary_hand_release, vertical_scroll_release, horizontal_scroll_release, thumb_up;"
            ></a-mixin>
        </a-assets>

        <!-- Interactables -->
        <a-entity id="media-counter" networked-counter="max: 10;"></a-entity>

        <a-entity id="pen-counter" networked-counter="max: 10;"></a-entity>

        <a-entity id="camera-counter" networked-counter="max: 1;"></a-entity>

        <a-entity id="drawing-manager" drawing-manager></a-entity>

        <a-entity
            id="cursor-controller"
            cursor-controller="
                cursor: #cursor;
                camera: #player-camera;
                objects: .collidable, .interactable, .ui;"
        ></a-entity>

        <a-sphere
            id="cursor"
            material="depthTest: false; opacity:0.9;"
            radius="0.02"
            segments-width="9"
            segments-height="9"
            ammo-body="type: kinematic; collisionFlags: 4; collisionFilterMask: 3; autoUpdateScale: false; activationState: 4;"
            ammo-shape="type: sphere; sphereRadius: 0.02; autoGenerateShape: false;"
            super-hands="
                colliderEvent: raycaster-intersection;
                colliderEndEvent: raycaster-intersection-cleared;
                grabStartButtons: cursor-grab, primary_hand_grab, secondary_hand_grab;
                grabEndButtons: cursor-release, primary_hand_release, secondary_hand_release;
                stretchStartButtons: cursor-grab, primary_hand_grab, secondary_hand_grab;
                stretchEndButtons: cursor-release, primary_hand_release, secondary_hand_release;
                dragDropStartButtons: cursor-grab, primary_hand_grab, secondary_hand_grab;
                dragDropEndButtons: cursor-release, primary_hand_release, secondary_hand_release;
                activateStartButtons: secondary-cursor-grab, secondary_hand_grab, next_color, previous_color, increase_radius, decrease_radius, scroll_up, scroll_down, scroll_left, scroll_right;
                activateEndButtons: secondary-cursor-release, secondary_hand_release, vertical_scroll_release, horizontal_scroll_release, thumb_up;"
            action-to-event__grab="path: /actions/cursorGrab; event: cursor-grab"
            action-to-event__drop="path: /actions/cursorDrop; event: cursor-release"
        >
            <a-image
                icon-button="image: #rotation-symbol"
                scale="0.1 0.1 0.1"
                position="0.0 0 0"
                class="hud"
                visible-if-rotating
            ></a-image>
        </a-sphere>

        <!-- Player Rig -->
        <a-entity
            id="player-rig"
            spawn-controller="loadedEvent: entered; target: #player-rig"
            wasd-to-analog2d
            character-controller="pivot: #player-camera"
            ik-root
            player-info
            cardboard-controls
        >
            <a-entity
                id="player-hud"
                hud-controller="head: #player-camera;"
                vr-mode-toggle-class="class: ui"
                vr-mode-toggle-visibility
                vr-mode-toggle-playing__hud-controller
            >
                <a-entity in-world-hud="haptic:#player-right-controller;raycaster:#player-right-controller;" rotation="30 0 0">
                    <a-rounded height="0.08" width="0.2" color="#000000" position="-0.30 0.125 0" radius="0.040" opacity="0.35" class="hud bg"></a-rounded>
                    <a-image scale="0.07 0.06 0.06" position="-0.23 0.165 0.001" src="#presence-count" material="alphaTest:0.1;"></a-image>
                    <a-entity id="hud-presence-count" text="value:; width:1.1; align:center;" position="-0.155 0.165 0" matrix-auto-update="target: text;"></a-entity>
                    <a-rounded height="0.08" width="0.5" color="#000000" position="-0.08 0.125 0" radius="0.040" opacity="0.35" class="hud bg"></a-rounded>
                    <a-entity id="hud-hub-entry-link" text="value:; width:1.1; align:center;" position="0.17 0.165 0" matrix-auto-update="target: text;"></a-entity>
                    <a-rounded height="0.13" width="0.59" color="#000000" position="-0.24 -0.065 0" radius="0.065" opacity="0.35" class="hud bg"></a-rounded>
                <a-image
                    icon-button="tooltip: #hud-tooltip; tooltipText: Mute Mic; activeTooltipText: Unmute Mic; image: #mute-off; hoverImage: #mute-off-hover; activeImage: #mute-on; activeHoverImage: #mute-on-hover"
                    scale="0.1 0.1 0.1"
                    position="-0.17 0 0.001"
                    class="hud mic"
                    material="alphaTest:0.1;"
                    hoverable
                    sound__hud_hover_start="src: #sound_asset-hud_hover_start; on: mouseover; poolSize: 5; positional: false;"
                    set-sounds-invisible
                ></a-image>
                <a-image
                    icon-button="tooltip: #hud-tooltip; tooltipText: Create; activeTooltipText: Resume; image: #spawn; hoverImage: #spawn-hover;"
                    scale="0.2 0.2 0.2"
                    position="0 0 0.005"
                    class="hud spawn"
                    hoverable
                    sound__hud_hover_start="src: #sound_asset-hud_hover_start; on: mouseover; poolSize: 5; positional: false;"
                    set-sounds-invisible
                ></a-image>
                <a-image
                    icon-button="tooltip: #hud-tooltip; tooltipText: Pen; activeTooltipText: Pen; image: #spawn-pen; hoverImage: #spawn-pen-hover; activeImage: #spawn-pen; activeHoverImage: #spawn-pen-hover"
                    scale="0.1 0.1 0.1"
                    position="0.17 0 0.001"
                    class="hud penhud"
                    material="alphaTest:0.1;"
                    hoverable
                    sound__hud_hover_start="src: #sound_asset-hud_hover_start; on: mouseover; poolSize: 5; positional: false;"
                    set-sounds-invisible
                ></a-image>
                <a-image
                    icon-button="tooltip: #hud-tooltip; tooltipText: Camera; activeTooltipText: Camera; image: #spawn-camera; hoverImage: #spawn-camera-hover; activeImage: #spawn-camera; activeHoverImage: #spawn-camera-hover"
                    scale="0.1 0.1 0.1"
                    position="0.28 0 0.001"
                    class="hud camera-btn"
                    material="alphaTest:0.1;"
                    hoverable
                    sound__hud_hover_start="src: #sound_asset-hud_hover_start; on: mouseover; poolSize: 5; positional: false;"
                    set-sounds-invisible
                ></a-image>
                <a-rounded visible="false" vr-mode-toggle-visibility id="hud-tooltip" height="0.08" width="0.3" color="#000000" position="-0.15 -0.2 0" rotation="-20 0 0" radius="0.025" opacity="0.35" class="hud bg">
                    <a-entity text="value: Mute Mic; align:center;" position="0.15 0.04 0.001" matrix-auto-update="target: text"></a-entity>
                </a-rounded>
                </a-entity>
            </a-entity>

            <a-entity
                id="player-camera"
                class="camera"
                camera
                personal-space-bubble="radius: 0.4;"
                rotation
                pitch-yaw-rotator
                set-yxz-order
                matrix-auto-update
                sound__teleport_start="positional: false; src: #sound_asset-teleport_start; on: nothing; poolSize: 2; loop: true;"
                scene-sound__teleport_start="on: right-teleport_down; off: right-teleport_up;"
                sound__teleport_start2="positional: false; src: #sound_asset-teleport_start; on: nothing; poolSize: 2; loop: true;"
                scene-sound__teleport_start2="on: left-teleport_down; off: left-teleport_up;"
                sound__teleport_end="positional: false; src: #sound_asset-teleport_end; on: nothing; poolSize: 2;"
                scene-sound__teleport_end="on: right-teleport_up;"
                sound__teleport_end2="positional: false; src: #sound_asset-teleport_end; on: nothing; poolSize: 2;"
                scene-sound__teleport_end2="on: left-teleport_up;"
                sound__snap_rotate_left="positional: false; src: #sound_asset-snap_rotate; on: nothing; poolSize: 3;"
                scene-sound__snap_rotate_left="on: snap_rotate_left;"
                sound__snap_rotate_right="positional: false; src: #sound_asset-snap_rotate; on: nothing; poolSize: 3;"
                scene-sound__snap_rotate_right="on: snap_rotate_right;"
                sound__media_loaded="positional: false; src: #sound_asset-media_loaded; on: nothing; poolSize: 2;"
                scene-sound__media_loaded="on: media-loaded;"
                sound__media_loading="positional: false; src: #sound_asset-media_loading; on: nothing; poolSize: 2; loop: true; "
                scene-sound__media_loading="on: media-loading; off: media-loaded;"
                sound__hud_action_mute="positional: false; src: #sound_asset-toggle_mute; on: nothing; poolSize: 2;"
                scene-sound__hud_action_mute="on: action_mute;"
                sound__hud_action_freeze="positional: false; src: #sound_asset-toggle_freeze; on: nothing; poolSize: 2;"
                scene-sound__hud_action_freeze="on: action_freeze;"
                sound__action_freeze="positional: false; src: #sound_asset-freeze; on: nothing; poolSize: 2;"
                scene-sound__action_freeze="on: play_freeze_sound;"
                sound__action_thaw="positional: false; src: #sound_asset-thaw; on: nothing; poolSize: 2;"
                scene-sound__action_thaw="on: play_thaw_sound;"
                sound__hud_action_space_bubble="positional: false; src: #sound_asset-toggle_space_bubble; on: nothing; poolSize: 2;"
                scene-sound__hud_action_space_bubble="on: action_space_bubble;"
                sound__hud_spawn_pen="positional: false; src: #sound_asset-spawn_pen; on: nothing; poolSize: 2;"
                scene-sound__hud_spawn_pen="on: spawn_pen;"
                sound__hud_hover_start="positional: false; src: #sound_asset-hud_hover_start; on: nothing; poolSize: 5;"
                sound__hud_click="positional: false; src: #sound_asset-hud_click; on: nothing; poolSize: 1;"
                scene-sound__hud_click="on: hud_click;"
                sound__cursor_distance_changed="positional: false; src: #sound_asset-cursor_distance_changed; on: nothing; poolSize: 1;"
                scene-sound__cursor_distance_changed="on: cursor-distance-changed;"
                sound__cursor_distance_change_blocked="positional: false; src: #sound_asset-cursor_distance_change_blocked; on: nothing; poolSize: 1;"
                scene-sound__cursor_distance_change_blocked="on: cursor-distance-change-blocked;"
                sound__camera_tool_took_snapshot="positional: false; src: #sound_asset-camera_tool_took_snapshot; on: nothing; poolSize: 1;"
                scene-sound__camera_tool_took_snapshot="on: camera_tool_took_snapshot;"
                sound__welcome="positional: false; src: #sound_asset-welcome; on: nothing; poolSize: 2;"
                scene-sound__welcome="on: entered;"
                sound__log_chat_message="positional: false; src: #sound_asset-chat; on: nothing; poolSize: 2;"
                scene-sound__log_chat_message="on: presence-log-chat;"
                sound__quack="positional: false; src: #sound_asset-quack; on: nothing; poolSize: 2;"
                scene-sound__quack="on: quack;"
                set-sounds-invisible
            >
                <a-entity
                    id="gaze-teleport"
                    position = "0.15 0 0"
                    teleport-controls="
                        cameraRig: #player-rig;
                        teleportOrigin: #player-camera;
                        button: gaze-teleport_;
                        collisionEntities: [nav-mesh];
                        drawIncrementally: true;
                        incrementalDrawMs: 300;
                        hitOpacity: 0.3;
                        missOpacity: 0.1;
                        curveShootingSpeed: 12;"
                    teleport-controls-matrix-auto-update
                    action-to-event__start-teleport="path: /actions/startTeleport; event: gaze-teleport_down"
                    action-to-event__stop-teleport="path: /actions/stopTeleport; event: gaze-teleport_up"
                ></a-entity>
            </a-entity>

            <a-entity
                id="player-left-controller"
                class="left-controller"
                hand-controls2="left"
                tracked-controls
                matrix-auto-update
                teleport-controls="
                    cameraRig: #player-rig;
                    teleportOrigin: #player-camera;
                    button: left-teleport_;
                    collisionEntities: [nav-mesh];
                    drawIncrementally: true;
                    incrementalDrawMs: 300;
                    hitOpacity: 0.3;
                    missOpacity: 0.1;
                    curveShootingSpeed: 12;"
                teleport-controls-matrix-auto-update
                haptic-feedback
                mixin="controller-super-hands"
                ammo-body="type: kinematic; addCollideEventListener: true; collisionFlags: 4; collisionFilterMask: 3; activationState: 4;"
                controls-shape-offset
                action-to-event__a="path: /actions/leftHandStartTeleport; event: left-teleport_down;"
                action-to-event__b="path: /actions/leftHandStopTeleport; event: left-teleport_up;"
                action-to-event__c="path: /actions/leftHandGrab; event: primary_hand_grab;"
                action-to-event__d="path: /actions/leftHandDrop; event: primary_hand_release;"
            >
            </a-entity>

            <a-entity
                id="player-right-controller"
                class="right-controller"
                hand-controls2="right"
                tracked-controls
                matrix-auto-update
                teleport-controls="
                    cameraRig: #player-rig;
                    teleportOrigin: #player-camera;
                    button: right-teleport_;
                    collisionEntities: [nav-mesh];
                    drawIncrementally: true;
                    incrementalDrawMs: 300;
                    hitOpacity: 0.3;
                    missOpacity: 0.1;
                    curveShootingSpeed: 12;"
                teleport-controls-matrix-auto-update
                haptic-feedback
                mixin="controller-super-hands"
                ammo-body="type: kinematic; addCollideEventListener: true; collisionFlags: 4; collisionFilterMask: 3; activationState: 4;"
                controls-shape-offset
                action-to-event__a="path: /actions/rightHandStartTeleport; event: right-teleport_down;"
                action-to-event__b="path: /actions/rightHandStopTeleport; event: right-teleport_up;"
                action-to-event__c="path: /actions/rightHandGrab; event: primary_hand_grab;"
                action-to-event__d="path: /actions/rightHandDrop; event: primary_hand_release;"
            >
            </a-entity>

            <a-entity gltf-model-plus="inflate: true;" class="model">
                <template data-name="AvatarRoot">
                    <a-entity
                        ik-controller="alwaysUpdate: true"
                        disable-frustum-culling
                        hand-pose__left
                        hand-pose__right
                        hand-pose-controller__left="networkedAvatar:#player-rig;eventSrc:#player-left-controller"
                        hand-pose-controller__right="networkedAvatar:#player-rig;eventSrc:#player-right-controller"
                    ></a-entity>
                </template>

                <template data-name="Neck">
                    <a-entity>
                        <a-entity class="nametag" visible="false" text ></a-entity>
                    </a-entity>
                </template>

                <template data-name="Head">
                    <a-entity id="player-head" visible="false" bone-visibility></a-entity>
                </template>

                <template data-name="LeftHand">
                    <a-entity bone-visibility hover-visuals="hand: left; controller: #player-left-controller"></a-entity>
                </template>

                <template data-name="RightHand">
                    <a-entity bone-visibility hover-visuals="hand: right; controller: #player-right-controller"></a-entity>
                </template>

            </a-entity>
        </a-entity>

        <!-- Environment -->
        <a-entity
            id="environment-root"
            ammo-body="type: static; mass: 0;"
            nav-mesh-helper
        >
            <a-entity id="environment-scene"></a-entity>
        </a-entity>

        <!-- Objects -->
        <a-entity id="objects-root">
            <a-entity id="objects-scene"></a-entity>
        </a-entity>

        <a-entity
            action-to-event="path: /actions/spawnPen; event: spawn_pen"
            super-spawner="
                template: #pen-interactable;
                src: https://asset-bundles-prod.reticulum.io/interactables/DrawingPen/DrawingPen-34fb4aee27.gltf;
                spawnEvent: spawn_pen;
                superHand: #player-right-controller;
                cursorSuperHand: #cursor;"
        ></a-entity>

        <a-entity matrix-auto-update class="vr-notice" follow-in-lower-fov="target: #player-camera; offset: 0 0 -0.8; angle: 39;" visible="false">
            <a-entity hoverable slice9="width: 0.9; height: 0.2; left: 64; top: 64; right: 66; bottom: 66; opacity: 1.0; src: #action-button" 
                text-button="
                    textHoverColor: #fff;
                    textColor: #fff;
                    backgroundColor: #2f80ed;"
                position="0 0 0.01"> </a-entity>
            <a-entity text="value:Lift your headset to continue; width:1; align:center;" position="0 0 0.02"></a-entity>
        </a-entity>

    </a-scene>

    <div id="ui-root"></div>
</body>

</html>
