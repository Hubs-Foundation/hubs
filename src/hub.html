<!DOCTYPE html>
<html>

<head>
    <!-- DO NOT REMOVE/EDIT THIS COMMENT - META_TAGS -->

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="shortcut icon" type="image/png" href="/favicon.ico">
    <title>Room | Hubs by Mozilla</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700" rel="stylesheet">
    <script>
        // HACK Chrome on iOS breaks completely if we don't do this because a-frame's webvr-polyfill doesn't recognize
        // Google Chrome on iOS correctly. We can remove this when we upgrade a-frame past 0.8.2.
        if (!window.WebVRConfig) { window.WebVRConfig = {}; }
    </script>
    <!-- Google Analytics -->
    <!-- NOTE GA tracking is disabled by default. You'll need to set the GA_TRACKING_ID build variable to enable it. -->
    <script>
    if (navigator.doNotTrack !== "1") {
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    }
    </script>
</head>

<body>
    <a-scene
        loading-screen="enabled: false"
        hubs-systems
        class="grab-cursor"
        renderer="antialias: true; colorManagement: true; sortObjects: true; physicallyCorrectLights: true; alpha: false; webgl2: true; multiview: false;"
        shadow="type: pcfsoft"
        networked-scene="adapter: janus; audio: true; debug: true; connectOnLoad: false;"
        physics="gravity: -9.8; debug: false; driver: ammo; debugDrawMode: 1;"
        mute-mic="eventSrc: a-scene; toggleEvents: action_mute"
        freeze-controller="toggleEvent: action_freeze"
        personal-space-bubble="debug: false;"
        vr-mode-ui="enabled: false"
        stats-plus="false"
        rotate-selected-object
        action-to-event__mute="path: /actions/muteMic; event: action_mute;"
        environment-map="loadDefault: false"
    >
        <a-assets>
            <img id="rotation-symbol" crossorigin="anonymous" src="./assets/rotation.png">
            <img id="button" crossorigin="anonymous" src="./assets/hud/button.9.png">
            <img id="action-button" crossorigin="anonymous" src="./assets/hud/action_button.9.png">
            <img id="tooltip" crossorigin="anonymous" src="./assets/hud/tooltip.9.png">
            <img id="mute-off" crossorigin="anonymous" src="./assets/hud/mute_off.png">
            <img id="mute-off-hover" crossorigin="anonymous" src="./assets/hud/mute_off-hover.png">
            <img id="mute-on" crossorigin="anonymous" src="./assets/hud/mute_on.png">
            <img id="mute-on-hover" crossorigin="anonymous" src="./assets/hud/mute_on-hover.png">
            <img id="spawn" crossorigin="anonymous" src="./assets/hud/spawn.png">
            <img id="spawn-hover" crossorigin="anonymous" src="./assets/hud/spawn-hover.png">
            <img id="pen-off" crossorigin="anonymous" src="./assets/hud/pen_off.png">
            <img id="pen-off-hover" crossorigin="anonymous" src="./assets/hud/pen_off-hover.png">
            <img id="pen-on" crossorigin="anonymous" src="./assets/hud/pen_on.png">
            <img id="pen-on-hover" crossorigin="anonymous" src="./assets/hud/pen_on-hover.png">
            <img id="camera-off" crossorigin="anonymous" src="./assets/hud/camera_off.png">
            <img id="camera-off-hover" crossorigin="anonymous" src="./assets/hud/camera_off-hover.png">
            <img id="camera-on" crossorigin="anonymous" src="./assets/hud/camera_on.png">
            <img id="camera-on-hover" crossorigin="anonymous" src="./assets/hud/camera_on-hover.png">
            <img id="snap-camera" crossorigin="anonymous" src="./assets/images/snap_camera.png">
            <img id="camera" crossorigin="anonymous" src="./assets/images/camera.png">
            <img id="presence-count" crossorigin="anonymous" src="./assets/hud/presence-count.png">
            <img id="camera-action" crossorigin="anonymous" src="./assets/camera-action.png">
            <img id="scale-action" crossorigin="anonymous" src="./assets/scale-action.png">
            <img id="rotate-action" crossorigin="anonymous" src="./assets/rotate-action.png">
            <img id="remove-action" crossorigin="anonymous" src="./assets/remove-action.png">
            <img id="recenter-action" crossorigin="anonymous" src="./assets/recenter-action.png">

            <img id="video-volume-down" crossorigin="anonymous" src="./assets/video-overlay/volume_down.png">
            <img id="video-volume-down-hover" crossorigin="anonymous" src="./assets/video-overlay/volume_down-hover.png">
            <img id="video-volume-up" crossorigin="anonymous" src="./assets/video-overlay/volume_up.png">
            <img id="video-volume-up-hover" crossorigin="anonymous" src="./assets/video-overlay/volume_up-hover.png">
            <img id="video-seek-back" crossorigin="anonymous" src="./assets/video-overlay/seek_back.png">
            <img id="video-seek-back-hover" crossorigin="anonymous" src="./assets/video-overlay/seek_back-hover.png">
            <img id="video-seek-forward" crossorigin="anonymous" src="./assets/video-overlay/seek_fwd.png">
            <img id="video-seek-forward-hover" crossorigin="anonymous" src="./assets/video-overlay/seek_fwd-hover.png">
            <img id="video-play" crossorigin="anonymous" src="./assets/video-overlay/play.png">
            <img id="video-play-hover" crossorigin="anonymous" src="./assets/video-overlay/play-hover.png">
            <img id="video-pause" crossorigin="anonymous" src="./assets/video-overlay/pause.png">
            <img id="video-pause-hover" crossorigin="anonymous" src="./assets/video-overlay/pause-hover.png">

            <a-asset-item id="botdefault" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf"></a-asset-item>
            <a-asset-item id="botbobo" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf"></a-asset-item>
            <a-asset-item id="botdom" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf"></a-asset-item>
            <a-asset-item id="botgreg" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf"></a-asset-item>
            <a-asset-item id="botguest" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf"></a-asset-item>
            <a-asset-item id="botjim" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf"></a-asset-item>
            <a-asset-item id="botkev" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf"></a-asset-item>
            <a-asset-item id="botpinky" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf"></a-asset-item>
            <a-asset-item id="botrobert" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf"></a-asset-item>
            <a-asset-item id="botwoody" response-type="arraybuffer" src="https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf"></a-asset-item>

            <a-asset-item id="quack"                                      src="./assets/sfx/quack.mp3"          response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="specialquack"                               src="./assets/sfx/specialquack.mp3"   response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-quack"                          src="./assets/sfx/quack.mp3"          response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-teleport_start"                 src="./assets/sfx/teleportArc.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-teleport_end"                   src="./assets/sfx/quickTurn.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-snap_rotate"                    src="./assets/sfx/tap_mellow.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-media_loaded"                   src="./assets/sfx/A_bendUp.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-media_loading"                  src="./assets/sfx/suspense.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-hud_hover_start"                src="./assets/sfx/tick.mp3"  response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-grab"                           src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-grab_off"                       src="./assets/sfx/tick.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-pinned"                         src="./assets/sfx/tack.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-cursor_distance_change_blocked" src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-cursor_distance_changed"        src="./assets/sfx/tick.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-hud_click"                      src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-toggle_mute"                    src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-toggle_freeze"                  src="./assets/sfx/Eb_blip.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-freeze"                         src="./assets/sfx/Eb_blip.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-thaw"                           src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-toggle_space_bubble"            src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-spawn_pen"                      src="./assets/sfx/PenSpawn.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-increase_pen_radius"            src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-decrease_pen_radius"            src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-next_pen_color"                 src="./assets/sfx/tick.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-prev_pen_color"                 src="./assets/sfx/tick.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-start_draw"                     src="./assets/sfx/PenDraw1.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-stop_draw"                      src="./assets/sfx/tick.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-camera_tool_took_snapshot"      src="./assets/sfx/PicSnapHey.mp3" response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-welcome"                        src="./assets/sfx/welcome.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>
            <a-asset-item id="sound_asset-chat"                           src="./assets/sfx/pop.mp3"     response-type="arraybuffer" preload="auto"></a-asset-item>

            <template id="remote-avatar-template">
                <a-entity networked-avatar ik-root player-info matrix-auto-update>
                    <a-entity class="camera" matrix-auto-update></a-entity>

                    <a-entity class="left-controller" matrix-auto-update></a-entity>

                    <a-entity class="right-controller" matrix-auto-update></a-entity>

                    <a-entity class="model" gltf-model-plus="inflate: true">
                        <template data-name="AvatarRoot">
                            <a-entity ik-controller hand-pose__left hand-pose__right space-invader-mesh="meshName: AvatarMesh"></a-entity>
                        </template>

                        <template data-name="Neck">
                            <a-entity>
                                <a-entity
                                    class="nametag"
                                    billboard
                                    matrix-auto-update
                                    text="side: double; align: center; color: #ddd"
                                    position="0 1 0"
                                    scale="6 6 6"
                                ></a-entity>
                            </a-entity>
                        </template>

                        <template data-name="Spine">
                            <a-entity is-remote-hover-target personal-space-invader="radius: 0.2; useMaterial: true;" bone-visibility>
                                <a-entity billboard matrix-auto-update visibility-while-frozen="withinDistance: 10; requireHoverOnNonMobile: false;">
                                    <a-entity is-remote-hover-target tags="singleActionButton:true;" mixin="rounded-text-button" block-button ui-class-while-frozen position="0 0 .35">
                                        <a-entity text="value:Hide; width:2.5; align:center;" position="0 0 0.01"></a-entity>
                                    </a-entity>
                                    <a-entity is-remote-hover-target tags="singleActionButton:true;" mixin="rounded-text-button" visible-if-permitted="kick_users" kick-button ui-class-while-frozen position="0 -0.25 .35">
                                        <a-entity text="value:Kick; width:2.5; align:center;"  visible-if-permitted="kick_users" position="0 0 0.01"></a-entity>
                                    </a-entity>
                                </a-entity>
                            </a-entity>
                        </template>

                        <template data-name="Head">
                            <a-entity
                                networked-audio-source="rolloffFactor: 2.0;"
                                networked-audio-analyser
                                personal-space-invader="radius: 0.15; useMaterial: true;"
                                bone-visibility
                                ammo-body="type: kinematic;"
                                ammo-shape="type: cylinder; fit: manual; halfExtents: 0.11 0.10 0.11; offset: 0 0.06 0.04;"
                            ></a-entity>
                        </template>

                        <template data-name="LeftHand">
                            <a-entity personal-space-invader="radius: 0.1" bone-visibility></a-entity>
                        </template>

                        <template data-name="RightHand">
                            <a-entity personal-space-invader="radius: 0.1" bone-visibility></a-entity>
                        </template>
                    </a-entity>
                </a-entity>
            </template>

            <template id="static-media">
                <a-entity
                    ammo-body="type: static; mass: 1;"
                    set-sounds-invisible
                >
                </a-entity>
            </template>

            <template id="static-controlled-media">
                <a-entity
                    class="interactable"
                    ammo-body="type: static; mass: 1;"
                    is-remote-hover-target
                    hoverable-visuals="cursorController: #cursor-controller"
                >
                </a-entity>
            </template>

            <template id="interactable-media">
                <a-entity
                    class="interactable"
                    ammo-body="type: dynamic; mass: 1;"
                    owned-object-limiter="counter: #media-counter"
                    set-unowned-body-kinematic
                    is-remote-hover-target
                    is-hand-collision-target
                    tags="isHoldable: true; offersHandConstraint: true; offersRemoteConstraint: true;"
                    destroy-at-extreme-distances
                    scalable-when-grabbed
                    sticky-object="autoLockOnRelease: true; autoLockOnLoad: true;"
                    set-yxz-order
                    matrix-auto-update
                    position-at-box-shape-border__freeze="target:.freeze-menu;"
                    hoverable-visuals="cursorController: #cursor-controller"
                >
                    <a-entity class="ui interactable-ui">
                        <a-entity class="freeze-menu" visibility-while-frozen="withinDistance: 10;">
                            <a-entity mixin="rounded-text-action-button" is-remote-hover-target tags="singleActionButton:true" pin-networked-object-button="tipSelector:.pin-button-tip; labelSelector:.pin-button-label; hideWhenPinnedSelector:.hide-when-pinned;" position="0 0.125 0.01">
                                <a-entity class="pin-button-label" visible="false" text=" value:pin; width:1.75; align:center;" text-raycast-hack position="0 0 0.01"></a-entity>
                            </a-entity>
                            <a-entity
                                class="pin-button-tip"
                                text="value:Pinning will broadcast this object to Discord.; width:1.75; align:center; color:#fff;"
                                visible="false"
                                text-raycast-hack
                                slice9="
                                    color: #0F40A9;
                                    width: 1.8;
                                    height: 0.2;
                                    left: 64;
                                    top: 64;
                                    right: 66;
                                    bottom: 66;
                                    opacity: 1.0;
                                    src: #button"
                                position="0 0.6 0.01">
                            </a-entity>
                            <a-entity is-remote-hover-target tags="singleActionButton:true;" mixin="rounded-text-button" camera-focus-button="track: false" position="-0.25 0.375 0.01">
                                <a-entity text=" value:focus; width:1.75; align:center;" text-raycast-hack position="0.075 0 0.02"></a-entity>
                                <a-image
                                    icon-button="image: #camera-action; hoverImage: #camera;"
                                    scale="0.165 0.165 0.165"
                                    position="-0.125 0.005 0.02"
                                ></a-image>
                            </a-entity>
                            <a-entity is-remote-hover-target tags="singleActionButton:true;" mixin="rounded-text-button" camera-focus-button="track: true" position="0.25 0.375 0.01">
                                <a-entity text=" value:track; width:1.75; align:center;" text-raycast-hack position="0.075 0 0.02"></a-entity>
                                <a-image
                                    icon-button="image: #camera-action; hoverImage: #camera-action;"
                                    scale="0.165 0.165 0.165"
                                    position="-0.125 0.005 0.01"
                                ></a-image>
                            </a-entity>
                            <a-entity mixin="rounded-button" is-remote-hover-target tags="singleActionButton: true;"  class="hide-when-pinned" remove-networked-object-button position="0 -0.375 0.01">
                                <a-image
                                    icon-button="image: #remove-action; hoverImage: #remove-action;"
                                    scale="0.165 0.165 0.165"
                                    position="0 0 0.001"
                                ></a-image>
                            </a-entity>
                            <a-entity is-remote-hover-target tags="singleActionButton:true;" mixin="rounded-text-button" open-media-button position="0.43 -0.375 0.01">
                                <a-entity text="value:open link; width:1.75; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                            </a-entity>
                            <a-entity is-remote-hover-target tags="singleActionButton:true;" mixin="rounded-text-button" clone-media-button position="-0.43 -0.375 0.01">
                                <a-entity text="value:clone; width:1.75; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                            </a-entity>
                            <a-entity mixin="rounded-action-button" tags="isHoldable: true; holdableButton: true;" is-remote-hover-target transform-button transform-button-selector position="-0.3 -0.125 0.01">
                                <a-image
                                    icon-button="image: #rotate-action; hoverImage: #rotate-action;"
                                    scale="0.165 0.165 0.165"
                                    position="0 0 0.001"
                                ></a-image>
                            </a-entity>
                            <a-entity mixin="rounded-action-button" tags="singleActionButton: true;" is-remote-hover-target transform-button="mode: align;" position="0 -0.125 0.01">
                                <a-image
                                    icon-button="image: #recenter-action; hoverImage: #recenter-action;"
                                    scale="0.165 0.165 0.165"
                                    position="0 0 0.001"
                                ></a-image>
                            </a-entity>
                            <a-entity mixin="rounded-action-button" tags="isHoldable: true; holdableButton: true;" is-remote-hover-target transform-button="mode: scale;" position="0.3 -0.125 0.01">
                                <a-image
                                    icon-button="image: #scale-action; hoverImage: #scale-action;"
                                    scale="0.165 0.165 0.165"
                                    position="0 0 0.001"
                                ></a-image>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <template id="pen-interactable">
                <a-entity
                    class="pen interactable"
                    ammo-body="type: dynamic; mass: 0.001;"
                    owned-object-limiter="counter: #pen-counter"
                    set-unowned-body-kinematic
                    is-remote-hover-target
                    is-hand-collision-target
                    tags="isHoldable: true; offersHandConstraint: true; offersRemoteConstraint: true; isPen: true;"
                    sticky-object="autoLockOnRelease: true; autoLockOnLoad: true; autoLockSpeedLimit: 0;"
                    matrix-auto-update
                    scale="0.5 0.5 0.5"
                    sound__next_pen_color="src: #sound_asset-next_pen_color; on: next_pen_color; poolSize: 2; positional: false;"
                    sound__prev_pen_color="src: #sound_asset-prev_pen_color; on: prev_pen_color; poolSize: 2; positional: false;"
                    sound__start_draw="src: #sound_asset-start_draw; on: start_draw; poolSize: 2;"
                    sound__stop_draw="src: #sound_asset-stop_draw; on: stop_draw; poolSize: 2; positional: false;"
                    sound__increase_pen_radius="src: #sound_asset-increase_pen_radius; on: increase_pen_radius; poolSize: 2; positional: false;"
                    sound__decrease_pen_radius="src: #sound_asset-decrease_pen_radius; on: decrease_pen_radius; poolSize: 2; positional: false;"
                    sound__grab="src: #sound_asset-grab; on: grabbed; poolSize: 1; positional: false;"
                    sound__graboff ="src: #sound_asset-grab_off; on: ungrabbed; poolSize: 1; positional: false;"
                    set-sounds-invisible
                    emit-state-change__grabbed="state: grabbed; transform: rising; event: grabbed;"
                    emit-state-change__ungrabbed="state: grabbed; transform: falling; event: ungrabbed;"
                    action-to-remove__pen="path: /actions/pen/remove;"
                    position-at-box-shape-border="target:.pen-menu"

                >
                    <a-sphere
                        id="pen"
                        scale="1.5, 1.5, 1.5"
                        position="0 -0.18 0"
                        radius="0.02"
                        color="#FF0033"
                        pen="camera: #player-camera; drawingManager: #drawing-manager"
                        segments-width="16"
                        segments-height="12"
                    ></a-sphere>
                    <a-entity class="ui delete-button pen-menu" visibility-while-frozen="withinDistance: 10;" >
                        <a-entity mixin="rounded-button" is-remote-hover-target tags="singleActionButton: true" remove-networked-object-button position="0 0 0.01">
                            <a-image
                                icon-button="image: #remove-action; hoverImage: #remove-action;"
                                scale="0.165 0.165 0.165"
                                position="0 0 0.001"
                            ></a-image>
                        </a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <template id="interactable-camera">
                <a-entity
                    class="interactable icamera"
                    ammo-body="type: dynamic; mass: 0.001;"
                    camera-tool
                    is-remote-hover-target
                    is-hand-collision-target
                    tags="isHoldable: true; offersHandConstraint: true; offersRemoteConstraint: true;"
                    matrix-auto-update
                    scale="0.5 0.5 0.5"
                    animation__spawn="property: scale; delay: 50; dur: 200; from: 0.5 0.5 0.5; to: 1 1 1; easing: easeOutQuad"
                    ammo-shape="type: box; fit: manual; halfExtents: 0.11 0.07 0.05; offset: 0 0.02 0;"
                    sticky-object="autoLockOnRelease: true; autoLockOnLoad: true; autoLockSpeedLimit: 0;"
                    owned-object-limiter="counter: #camera-counter"
                    set-unowned-body-kinematic
                    scalable-when-grabbed
                    position-at-box-shape-border__freeze="target: .camera-menu"
                    set-yxz-order
                >
                    <a-entity class="ui interactable-ui camera-menu" visibility-while-frozen="withinDistance: 10;">
                        <a-entity mixin="rounded-text-action-button" is-remote-hover-target tags="singleActionButton: true;" mirror-camera-button="labelSelector:.mirror-button-label;" position="0 0.125 0.01">
                            <a-entity text=" value:mirror; width:2.5; align:center;" class="mirror-button-label" text-raycast-hack position="0 0 0.02"></a-entity>
                        </a-entity>
                        <a-entity mixin="rounded-action-button" is-remote-hover-target tags="singleActionButton: true;" transform-button="mode: align;" position="-0.15 -0.125 0.01">
                            <a-image
                                icon-button="image: #recenter-action; hoverImage: #recenter-action;"
                                scale="0.165 0.165 0.165"
                                position="0 0 0.001"
                            ></a-image>
                        </a-entity>
                        <a-entity mixin="rounded-action-button" is-remote-hover-target tags="isHoldable: true; holdableButton: true;" transform-button transform-button-selector position="0.15 -0.125 0.01">
                            <a-image
                                icon-button="image: #rotate-action; hoverImage: #rotate-action;"
                                scale="0.165 0.165 0.165"
                                position="0 0 0.001"
                            ></a-image>
                        </a-entity>
                        <a-entity mixin="rounded-button" is-remote-hover-target tags="singleActionButton: true" remove-networked-object-button position="0 -0.350 0.01">
                            <a-image
                                icon-button="image: #remove-action; hoverImage: #remove-action;"
                                scale="0.165 0.165 0.165"
                                position="0 0 0.001"
                            ></a-image>
                        </a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <template id="camera-hover-menu">
                <a-entity class="ui interactable-ui hover-container camera-snap-menu" mixin="button-container" visible="false">
                    <a-entity class="snap-button" mixin="rounded-action-button" is-remote-hover-target tags="isHoverMenuChild: true; singleActionButton: true;" position="0 -0.145 0.0" scale="0.75 0.75 0.75">
                        <a-image
                            icon-button="image: #snap-camera; hoverImage: #snap-camera;"
                            scale="0.225 0.225 0.225"
                            position="0 0.005 0.01"
                        ></a-image>
                    </a-entity>
                </a-entity>
            </template>

            <template id="interactable-drawing">
                <a-entity
                    networked-drawing
                ></a-entity>
            </template>

            <template id="paging-toolbar">
                <a-entity class="ui paging-toolbar" visibility-while-frozen="withinDistance: 10; requireHoverOnNonMobile: false;">
                    <a-entity class="prev-button" position="-0.3 0 0">
                        <a-entity is-remote-hover-target tags="singleActionButton:true;" mixin="rounded-text-button" slice9="width: 0.2">
                            <a-entity text=" value:<; width:2; align:center;" text-raycast-hack position="0 0 0.01"></a-entity>
                        </a-entity>
                    </a-entity>
                    <a-entity class="page-label" text="value:.; width:2; align:center;" text-raycast-hack></a-entity>
                    <a-entity class="next-button" position="0.3 0 0">
                        <a-entity is-remote-hover-target tags="singleActionButton:true;" mixin="rounded-text-button" slice9="width: 0.2">
                            <a-entity text=" value:>; width:2; align:center;" text-raycast-hack position="0 0 0.01"></a-entity>
                        </a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <!-- TODO: All of these positions are assuming 16:9 - need to actually reposition based on video resolution -->
            <template id="video-hover-menu">
                <a-entity class="ui interactable-ui hover-container" visible="false">
                    <a-entity class="video-time-label" text="value: 0; anchor: center; align: center; color: #aaa;" text-raycast-hack position="0 -0.24 0" scale="0.75 0.75 0.75"></a-entity>
                    <a-entity class="video-volume-label" text="value: 0%; anchor: center; align: center; color: #ccc; letterSpacing: 4;" text-raycast-hack position="0.0 0.175 0.015" scale="1.25 1.25 1.25"></a-entity>
                    <a-image
                        is-remote-hover-target
                        tags="singleActionButton: true; isHoverMenuChild: true;"
                        icon-button="image: #video-volume-down; hoverImage: #video-volume-down-hover;"
                        scale="0.075 0.075 0.075"
                        position="-0.275 0.175 0"
                        class="ui video-volume-down-button"
                    ></a-image>
                    <a-image
                        is-remote-hover-target
                        tags="singleActionButton: true; isHoverMenuChild: true;"
                        icon-button="image: #video-volume-up; hoverImage: #video-volume-up-hover;"
                        scale="0.075 0.075 0.075"
                        position="0.275 0.175 0"
                        class="ui video-volume-up-button"
                    ></a-image>
                    <a-image
                        is-remote-hover-target
                        tags="singleActionButton: true; isHoverMenuChild: true;"
                        icon-button="image: #video-seek-back; hoverImage: #video-seek-back-hover;"
                        scale="0.1 0.1 0.1"
                        position="-0.3 -0.125 0"
                        class="ui video-seek-back-button"
                        visible="false"
                    ></a-image>
                    <a-image
                        is-remote-hover-target
                        tags="singleActionButton: true; isHoverMenuChild: true;"
                        icon-button="image: #video-pause; hoverImage: #video-pause-hover; activeImage: #video-play; activeHoverImage: #video-play-hover"
                        scale="0.15 0.15 0.15"
                        position="0 -0.125 0"
                        class="ui video-playpause-button"
                        visible="false"
                    ></a-image>
                    <a-image
                        is-remote-hover-target
                        tags="singleActionButton: true; isHoverMenuChild: true;"
                        icon-button="image: #video-seek-forward; hoverImage: #video-seek-forward-hover;"
                        scale="0.1 0.1 0.1"
                        position="0.3 -0.125 0"
                        class="ui video-seek-forward-button"
                        visible="false"
                    ></a-image>
                </a-entity>
            </template>

            <template id="hubs-destination-hover-menu">
                <a-entity class="ui interactable-ui hover-container" visible="false">
                    <a-entity mixin="rounded-text-action-button ui" is-remote-hover-target tags="singleActionButton: true; isHoverMenuChild: true;" open-media-button position="0 -0.125 0.01">
                        <a-entity text="value:value; width:1.5; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <template id="video-unmute">
                <a-entity
                    class="ui interactable-ui hover-container unmute-ui"
                    position="0 0 0.1"
                    visibility-while-frozen="visible: false; withinDistance: 10; requireHoverOnNonMobile: false;"
                >
                    <a-entity is-remote-hover-target tags="singleActionButton:true;" mixin="rounded-text-button" slice9="width: 0.4" unmute-video-button position="0 -0.5 0.01">
                        <a-entity text="value:unmute; width:2; align:center;" text-raycast-hack position="0 0 0.02"></a-entity>
                    </a-entity>
                </a-entity>
            </template>

            <a-mixin id="rounded-text-button"
                text-button="
                    textHoverColor: #ff3464;
                    textColor: #ff3464;
                    backgroundHoverColor: #aaa;
                    backgroundColor: #fff;"
                slice9="
                    width: 0.45;
                    height: 0.2;
                    left: 64;
                    top: 64;
                    right: 66;
                    bottom: 66;
                    opacity: 1.0;
                    src: #button"
            ></a-mixin>

            <a-mixin id="rounded-button"
                text-button="
                    textHoverColor: #ff3464;
                    textColor: #ff3464;
                    backgroundHoverColor: #aaa;
                    backgroundColor: #fff;"
                slice9="
                    width: 0.2;
                    height: 0.2;
                    left: 64;
                    top: 64;
                    right: 66;
                    bottom: 66;
                    opacity: 1.0;
                    src: #button"
            ></a-mixin>

            <a-mixin id="rounded-text-action-button"
                text-button="
                    textHoverColor: #fff;
                    textColor: #fff;
                    backgroundColor: #ff3464;
                    backgroundHoverColor: #fc3545;
                    "
                slice9="
                    width: 0.45;
                    height: 0.2;
                    left: 64;
                    top: 64;
                    right: 66;
                    bottom: 66;
                    opacity: 1.0;
                    src: #action-button"
            ></a-mixin>

            <a-mixin id="rounded-action-button"
                text-button="
                    textHoverColor: #fff;
                    textColor: #fff;
                    backgroundColor: #ff3464;
                    backgroundHoverColor: #fc3545;
                    "
                slice9="
                    width: 0.2;
                    height: 0.2;
                    left: 64;
                    top: 64;
                    right: 66;
                    bottom: 66;
                    opacity: 1.0;
                    src: #action-button"
            ></a-mixin>
        </a-assets>

        <!-- Interactables -->
        <a-entity id="media-counter" networked-counter="max: 10;"></a-entity>

        <a-entity id="pen-counter" networked-counter="max: 10;"></a-entity>

        <a-entity id="camera-counter" networked-counter="max: 1;"></a-entity>

        <a-entity id="drawing-manager" drawing-manager></a-entity>

        <a-entity
            id="cursor-controller"
            cursor-controller="cursor: #cursor; camera: #player-camera;"
        ></a-entity>

        <a-sphere
            id="cursor"
            material="depthTest: false; opacity:0.9;"
            radius="0.02"
            segments-width="9"
            segments-height="9"
            ammo-body="type: kinematic; collisionFlags: 4; collisionFilterMask: 3; scaleAutoUpdate: false; activationState: disable_deactivation;"
            ammo-shape="type: sphere; sphereRadius: 0.02; fit: manual;"
        >
            <a-image
                icon-button="image: #rotation-symbol"
                scale="0.1 0.1 0.1"
                position="0.0 0 0"
                class="hud"
                visible-if-transforming
            ></a-image>
        </a-sphere>

        <!-- Player Rig -->
        <a-entity
            id="player-rig"
            spawn-controller="loadedEvent: entered; target: #player-rig"
            wasd-to-analog2d
            character-controller="pivot: #player-camera"
            ik-root
            player-info
        >
            <a-entity
                id="player-hud"
                hud-controller="head: #player-camera;"
                vr-mode-toggle-class="class: ui"
                vr-mode-toggle-visibility
                vr-mode-toggle-playing__hud-controller
            >
                <a-entity in-world-hud rotation="30 0 0">

                    <a-rounded height="0.08" width="0.2" color="#000000" position="-0.30 0.125 0" radius="0.040" opacity="0.35" class="hud bg"></a-rounded>
                    <a-image scale="0.07 0.06 0.06" position="-0.23 0.165 0.001" src="#presence-count" material="alphaTest:0.1;"></a-image>
                    <a-entity id="hud-presence-count" text="value:; width:1.1; align:center;" position="-0.155 0.165 0" matrix-auto-update="target: text;"></a-entity>
                    <a-entity class="ui interactable-ui">
                        <a-entity class="invite-btn" position="0.17 0.165 0" scale="0.5 0.5 0.5">
                            <a-entity mixin="rounded-text-action-button" is-remote-hover-taget tags="singleActionButton: true;" slice9="width: 1.0" scale="0.8 0.8 1.0">
                                <a-entity text=" value:invite; width:2; align:center;" text-raycast-hack position="0 0 0.01"></a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                <a-image
                    is-remote-hover-target
                    tags="singleActionButton: true"
                    icon-button="tooltip: #hud-tooltip; tooltipText: Mute Mic; activeTooltipText: Unmute Mic; image: #mute-off; hoverImage: #mute-off-hover; activeImage: #mute-on; activeHoverImage: #mute-on-hover"
                    scale="0.1 0.1 0.1"
                    position="-0.17 0 0.001"
                    class="hud mic"
                    material="alphaTest:0.1;"
                    sound__hud_hover_start="src: #sound_asset-hud_hover_start; on: mouseover; poolSize: 5; positional: false;"
                    set-sounds-invisible
                ></a-image>
                <a-image
                    is-remote-hover-target
                    tags="singleActionButton: true"
                    icon-button="tooltip: #hud-tooltip; tooltipText: Create; activeTooltipText: Resume; image: #spawn; hoverImage: #spawn-hover;"
                    scale="0.2 0.2 0.2"
                    position="0 0 0.005"
                    class="hud spawn"
                    sound__hud_hover_start="src: #sound_asset-hud_hover_start; on: mouseover; poolSize: 5; positional: false;"
                    set-sounds-invisible
                ></a-image>
                <a-image
                    is-remote-hover-target
                    tags="singleActionButton: true"
                    icon-button="tooltip: #hud-tooltip; tooltipText: Pen; activeTooltipText: Pen; image: #pen-off; hoverImage: #pen-off-hover; activeImage: #pen-on; activeHoverImage: #pen-on-hover"
                    scale="0.1 0.1 0.1"
                    position="0.17 0 0.001"
                    class="hud penhud"
                    material="alphaTest:0.1;"
                    sound__hud_hover_start="src: #sound_asset-hud_hover_start; on: mouseover; poolSize: 5; positional: false;"
                    set-sounds-invisible
                ></a-image>
                <a-image
                    is-remote-hover-target
                    tags="singleActionButton: true"
                    icon-button="tooltip: #hud-tooltip; tooltipText: Camera; activeTooltipText: Camera; image: #camera-off; hoverImage: #camera-off-hover; activeImage: #camera-on; activeHoverImage: #camera-on-hover"
                    scale="0.1 0.1 0.1"
                    position="0.28 0 0.001"
                    class="hud camera-btn"
                    material="alphaTest:0.1;"
                    sound__hud_hover_start="src: #sound_asset-hud_hover_start; on: mouseover; poolSize: 5; positional: false;"
                    set-sounds-invisible
                ></a-image>
                <a-rounded visible="false" vr-mode-toggle-visibility id="hud-tooltip" height="0.08" width="0.3" color="#000000" position="-0.15 -0.2 0" rotation="-20 0 0" radius="0.025" opacity="0.35" class="hud bg">
                    <a-entity text="value: Mute Mic; align:center;" position="0.15 0.04 0.001" matrix-auto-update="target: text"></a-entity>
                </a-rounded>
                </a-entity>
            </a-entity>

            <a-entity
                id="player-camera"
                class="camera"
                camera
                personal-space-bubble="radius: 0.4;"
                rotation
                pitch-yaw-rotator
                set-yxz-order
                matrix-auto-update
                set-active-camera
                sound__teleport_start="positional: false; src: #sound_asset-teleport_start; on: nothing; poolSize: 2; loop: true;"
                scene-sound__teleport_start="on: teleport-sound-start; off: teleport-sound-stop, teleport-sound-cancel;"
                sound__teleport_end="positional: false; src: #sound_asset-teleport_end; on: nothing; poolSize: 2;"
                scene-sound__teleport_end="on: teleport-sound-stop; off: teleport-sound-start"
                sound__snap_rotate_left="positional: false; src: #sound_asset-snap_rotate; on: nothing; poolSize: 3;"
                scene-sound__snap_rotate_left="on: snap_rotate_left;"
                sound__snap_rotate_right="positional: false; src: #sound_asset-snap_rotate; on: nothing; poolSize: 3;"
                scene-sound__snap_rotate_right="on: snap_rotate_right;"
                sound__media_loaded="positional: false; src: #sound_asset-media_loaded; on: nothing; poolSize: 2;"
                scene-sound__media_loaded="on: media-loaded;"
                sound__media_loading="positional: false; src: #sound_asset-media_loading; on: nothing; poolSize: 2; loop: true; "
                scene-sound__media_loading="on: media-loading; off: media-loaded;"
                sound__hud_action_mute="positional: false; src: #sound_asset-toggle_mute; on: nothing; poolSize: 2;"
                scene-sound__hud_action_mute="on: action_mute;"
                sound__hud_action_freeze="positional: false; src: #sound_asset-toggle_freeze; on: nothing; poolSize: 2;"
                scene-sound__hud_action_freeze="on: action_freeze;"
                sound__action_freeze="positional: false; src: #sound_asset-freeze; on: nothing; poolSize: 2;"
                scene-sound__action_freeze="on: play_freeze_sound;"
                sound__action_thaw="positional: false; src: #sound_asset-thaw; on: nothing; poolSize: 2;"
                scene-sound__action_thaw="on: play_thaw_sound;"
                sound__hud_action_space_bubble="positional: false; src: #sound_asset-toggle_space_bubble; on: nothing; poolSize: 2;"
                scene-sound__hud_action_space_bubble="on: action_space_bubble;"
                sound__hud_spawn_pen="positional: false; src: #sound_asset-spawn_pen; on: nothing; poolSize: 2;"
                scene-sound__hud_spawn_pen="on: spawn_pen;"
                sound__hud_hover_start="positional: false; src: #sound_asset-hud_hover_start; on: nothing; poolSize: 5;"
                sound__hud_click="positional: false; src: #sound_asset-hud_click; on: nothing; poolSize: 1;"
                scene-sound__hud_click="on: hud_click;"
                sound__cursor_distance_changed="positional: false; src: #sound_asset-cursor_distance_changed; on: nothing; poolSize: 1;"
                scene-sound__cursor_distance_changed="on: cursor-distance-changed;"
                sound__cursor_distance_change_blocked="positional: false; src: #sound_asset-cursor_distance_change_blocked; on: nothing; poolSize: 1;"
                scene-sound__cursor_distance_change_blocked="on: cursor-distance-change-blocked;"
                sound__camera_tool_took_snapshot="positional: false; src: #sound_asset-camera_tool_took_snapshot; on: nothing; poolSize: 1;"
                scene-sound__camera_tool_took_snapshot="on: camera_tool_took_snapshot;"
                sound__welcome="positional: false; src: #sound_asset-welcome; on: nothing; poolSize: 2;"
                scene-sound__welcome="on: entered;"
                sound__log_chat_message="positional: false; src: #sound_asset-chat; on: nothing; poolSize: 2;"
                scene-sound__log_chat_message="on: presence-log-chat;"
                sound__quack="positional: false; src: #sound_asset-quack; on: nothing; poolSize: 2;"
                scene-sound__quack="on: quack;"
                set-sounds-invisible
            >
                <a-entity
                    id="gaze-teleport"
                    position = "0.15 0 0"
                    teleporter="start: /actions/startTeleport; confirm: /actions/stopTeleport; collisionEntities: [nav-mesh];"
                ></a-entity>
            </a-entity>

            <a-entity
                id="player-left-controller"
                class="left-controller"
                track-pose="path: /actions/leftHand/matrix"
                visibility-by-path="path: /actions/leftHand/matrix"
                hand-controls2="left"
                teleporter="start: /actions/leftHand/startTeleport; confirm: /actions/leftHand/stopTeleport; collisionEntities: [nav-mesh]"
                matrix-auto-update
                ammo-body="type: kinematic; emitCollisionEvents: false; collisionFlags: 4; collisionFilterMask: 3; activationState: disable_deactivation; scaleAutoUpdate: false;"
                ammo-shape="type: box; fit: manual; halfExtents: 0.03 0.04 0.05; offset: 0 0 -0.04"
            >
            </a-entity>

            <a-entity
                id="player-right-controller"
                class="right-controller"
                track-pose="path: /actions/rightHand/matrix"
                visibility-by-path="path: /actions/rightHand/matrix"
                hand-controls2="right"
                teleporter="start: /actions/rightHand/startTeleport; confirm: /actions/rightHand/stopTeleport; collisionEntities: [nav-mesh]"
                matrix-auto-update
                ammo-body="type: kinematic; emitCollisionEvents: false; collisionFlags: 4; collisionFilterMask: 3; activationState: disable_deactivation; scaleAutoUpdate: false;"
                ammo-shape="type: box; fit: manual; halfExtents: 0.03 0.04 0.05; offset: 0 0 -0.04"
            >
            </a-entity>

            <a-entity gltf-model-plus="inflate: true;" class="model">
                <template data-name="AvatarRoot">
                    <a-entity
                        ik-controller="alwaysUpdate: true"
                        disable-frustum-culling
                        hand-pose__left
                        hand-pose__right
                        hand-pose-controller__left="networkedAvatar:#player-rig;eventSrc:#player-left-controller"
                        hand-pose-controller__right="networkedAvatar:#player-rig;eventSrc:#player-right-controller"
                    ></a-entity>
                </template>

                <template data-name="Neck">
                    <a-entity>
                        <a-entity class="nametag" visible="false" text ></a-entity>
                    </a-entity>
                </template>

                <template data-name="Head">
                    <a-entity id="player-head" visible="false" bone-visibility></a-entity>
                </template>

                <template data-name="LeftHand">
                    <a-entity bone-visibility hover-visuals="hand: left;"></a-entity>
                </template>

                <template data-name="RightHand">
                    <a-entity bone-visibility hover-visuals="hand: right;"></a-entity>
                </template>

            </a-entity>
        </a-entity>

        <!-- Environment -->
        <a-entity
            id="environment-root"
            ammo-body="type: static; mass: 0;"
            nav-mesh-helper
        >
            <a-entity id="environment-scene"></a-entity>
        </a-entity>

        <!-- Objects -->
        <a-entity id="objects-root">
            <a-entity id="objects-scene"></a-entity>
        </a-entity>

        <a-entity
            action-to-event="path: /actions/spawnPen; event: spawn_pen"
            super-spawner="
                template: #pen-interactable;
                src: https://asset-bundles-prod.reticulum.io/interactables/DrawingPen/DrawingPen-34fb4aee27.gltf;
                spawnEvent: spawn_pen;
                animateFromCursor: true;
                useCustomSpawnScale: true;
                spawnScale: 0.5, 0.5, 0.5;
                "
        ></a-entity>

        <a-entity matrix-auto-update class="vr-notice" follow-in-fov="target: #player-camera; offset: 0 0 -0.8; angle: 39;" visible="false">
            <a-entity slice9="width: 0.9; height: 0.2; left: 64; top: 64; right: 66; bottom: 66; opacity: 1.0; src: #button"
                text-button="
                    textHoverColor: #fff;
                    textColor: #fff;
                    backgroundColor: #2f80ed;"
                position="0 0 0.01">
                <a-entity text="value:Lift your headset to continue; width:1; align:center;" position="0 0 0.01"></a-entity>
            </a-entity>
        </a-entity>

    </a-scene>

    <div id="ui-root"></div>
</body>

</html>
